<body>
<div class="quiz-container">

  <h1>Quiz „{{ quiz?.title }}“ bearbeiten</h1>

  <form (ngSubmit)="onSubmit()">

    <div
      *ngFor="let question of formData; let qi = index"
      class="question-block"
    >

      <button
        type="button"
        class="remove-question-btn"
        (click)="removeQuestion(qi)"
      >
        Frage löschen
      </button>

      <label>Frage:</label>
      <input
        type="text"
        [(ngModel)]="question.questionText"
        name="question{{ qi }}"
        placeholder="Frage eingeben"
      >

      <label>Fragetyp:</label>
      <select
        [(ngModel)]="question.questionType"
        name="question{{ qi }}type"
        (change)="onQuestionTypeChange(qi)"
      >
        <option value="SingleAnswerQuestion">Single Answer</option>
        <option value="MultipleAnswerQuestion">Multiple Answer</option>
        <option value="UserInputQuestion">User Input</option>
      </select>

      <label>Antwortmöglichkeiten:</label>

      <div
        *ngFor="let ans of question.answers; let ai = index"
        class="answer-option"
      >
        <input
          type="text"
          [(ngModel)]="ans.answerText"
          name="question{{ qi }}answer{{ ai }}"
          placeholder="Antwort eingeben"
        >

        <input
          *ngIf="question.questionType !== 'UserInputQuestion'"
          type="checkbox"
          [(ngModel)]="ans.correct"
          name="question{{ qi }}correct{{ ai }}"
          (change)="setSingleCorrect(qi, ai)"
        >

        <button
          *ngIf="question.answers.length > 1"
          type="button"
          (click)="removeAnswer(qi, ai)"
        >
          X
        </button>
      </div>

      <button
        *ngIf="question.questionType !== 'UserInputQuestion'"
        type="button"
        (click)="addAnswer(qi)"
      >
        Antwort hinzufügen
      </button>

    </div>

    <button type="button" (click)="addQuestion()">
      Frage hinzufügen
    </button>

    <button type="submit" (click)="saveEdits()">
      Änderungen speichern
    </button>

    <button type="button" (click)="cancel()">
      Abbrechen
    </button>

  </form>

</div>
</body>
